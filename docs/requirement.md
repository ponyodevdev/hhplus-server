# 🎟️ 콘서트 예약 시스템 요구사항 정리

## ✅ 기능적 요구사항

1. 사용자는 **대기열 토큰을 발급받아야만** 모든 API를 사용할 수 있다.
2. 대기열 토큰에는 다음 정보가 포함된다:
    - UUID
    - 대기 순서
    - 잔여 시간 등
3. 사용자는 **대기열 토큰으로 자신의 대기 순서를 조회**할 수 있다.
4. 사용자는 **예약 가능한 날짜 목록을 조회**할 수 있다.
5. 사용자는 **특정 날짜에 대한 좌석 정보(1~50번)를 조회**할 수 있다.
6. 사용자는 **날짜와 좌석 번호를 입력해 좌석을 임시 예약**할 수 있다.
7. 임시 예약된 좌석은 **5분간 해당 유저에게만 점유**되며,
    - 이 시간 동안 다른 유저는 접근할 수 없다.
8. **5분 내 결제가 완료되지 않으면**, 좌석은 자동으로 해제된다.
9. 사용자는 **잔액을 충전하거나, 잔액을 조회**할 수 있다.
10. 사용자는 **결제 API를 통해 좌석 결제를 완료**할 수 있다.
11. **결제가 완료되면 좌석 소유권은 유저에게 확정되며, 대기열 토큰은 만료된다.**

---

## ⚙️ 비기능적 요구사항

1. 모든 API는 **유효한 대기열 토큰**을 요구하며, 유효하지 않으면 `401 Unauthorized` 또는 `403 Forbidden`을 반환한다.
2. 시스템은 **다수 인스턴스로 실행되어도 동작에 문제가 없어야 한다.**
3. **대기열 시스템은 필수적으로 구현되어야 한다.**
4. 각 API 기능은 **단위 테스트가 하나 이상 반드시 작성**되어야 한다.
5. **대기열 상태 조회는 기본적으로 폴링 방식**으로 구현되어야 한다.
6. **좌석 예약 실패 시**, 사용자에게 **즉시 명확한 에러 메시지**를 반환해야 한다.
    - 예: `"이미 예약된 좌석입니다."`
7. 동일 좌석에 대해 여러 사용자가 동시에 예약 시도할 경우:
    - **오직 1명만 성공**하도록 락 처리(동시성 제어)를 적용해야 한다.
8. 동일 사용자가 **여러 탭에서 동시에 예약을 시도해도 중복 처리가 발생하지 않아야 한다.**
9. 모든 API는 **일관된 결과를 제공**해야 하며,
    - 여러 요청이 동시에 들어와도 처리 순서 및 결과에 문제가 없어야 한다.
